class Solution {
    public List<Integer> countSmaller(int[] nums) {
        
        List<Integer> result= new ArrayList<>();
        List<Integer> sorted= new ArrayList<>();
        for(int i= nums.length-1; i>=0; i--){
            int num= nums[i];
            int idx= binary(sorted,num);
            result.add(idx);
            sorted.add(idx,num);
            
        }
        Collections.reverse(result);
        return result;
    }
    private int binary(List<Integer> sorted, int target){
        int left=0, right=sorted.size();
        while(left<right){
            int mid= left+(right-left)/2;
            if(sorted.get(mid)<target){
                left=mid+1;
            }
            else{
                right=mid;
            }
        }
        return left;
    }
}
